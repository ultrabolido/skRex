<!DOCTYPE html>
<html>
<head>
<title>Rex: Routine at C5BE</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../rex.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/scr/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="50227.html">C433</a>
</td>
<td class="up">Up: <a href="../maps/all.html#50622">Map</a></td>
<td class="next">
Next: <a href="50664.html">C5E8</a>
</td>
</tr>
</table>
<div class="description">C5BE: Enemy configuration for FOOTMAN crouched or stand-by</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="50227.html#50584">C598</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="50622"></span>C5BE</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="50623"></span>
<div class="comments">
<div class="paragraph">
Set enemy configuration for FOOT MAN crouched
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="50623"></span>C5BF</td>
<td class="instruction">LD A,(IX+$11)</td>
<td class="comment-1" rowspan="3">Return if state change counter is not zero</td>
</tr>
<tr>
<td class="address-1"><span id="50626"></span>C5C2</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="address-1"><span id="50627"></span>C5C3</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="address-1"><span id="50628"></span>C5C4</td>
<td class="instruction">LD HL,$8318</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to the address for the graphic data of crouched FOOT MAN</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="50631"></span>
<div class="comments">
<div class="paragraph">
Set enemy configuration for FOOT MAN. Used to set the type: crouched or stand-by
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="50631"></span>C5C7</td>
<td class="instruction">LD (IX+$10),$00</td>
<td class="comment-1" rowspan="1">Stop FOOT MAN</td>
</tr>
<tr>
<td class="address-1"><span id="50635"></span>C5CB</td>
<td class="instruction">LD (IX+$04),L</td>
<td class="comment-1" rowspan="2">Set the address for the static sprite graphic data</td>
</tr>
<tr>
<td class="address-1"><span id="50638"></span>C5CE</td>
<td class="instruction">LD (IX+$05),H</td>
</tr>
<tr>
<td class="address-1"><span id="50641"></span>C5D1</td>
<td class="instruction">LD (IX+$0E),$02</td>
<td class="comment-1" rowspan="1">Set width of sprite</td>
</tr>
<tr>
<td class="address-1"><span id="50645"></span>C5D5</td>
<td class="instruction">LD (IX+$12),$01</td>
<td class="comment-1" rowspan="1">Set FOOT MAN type to crouched</td>
</tr>
<tr>
<td class="address-1"><span id="50649"></span>C5D9</td>
<td class="instruction">CALL <a href="42269.html">$A51D</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> a pseudo-random number</td>
</tr>
<tr>
<td class="address-1"><span id="50652"></span>C5DC</td>
<td class="instruction">AND $0F</td>
<td class="comment-1" rowspan="2">Set the pseudo-rendom number to be between $1F and $10</td>
</tr>
<tr>
<td class="address-1"><span id="50654"></span>C5DE</td>
<td class="instruction">ADD A,$10</td>
</tr>
<tr>
<td class="address-1"><span id="50656"></span>C5E0</td>
<td class="instruction">LD (IX+$11),A</td>
<td class="comment-1" rowspan="1">Set this number to the state change counter</td>
</tr>
<tr>
<td class="address-1"><span id="50659"></span>C5E3</td>
<td class="instruction">SET 7,(IX+$09)</td>
<td class="comment-1" rowspan="1">Set the enemy type to select the address for the static graphic data</td>
</tr>
<tr>
<td class="address-1"><span id="50663"></span>C5E7</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="50227.html">C433</a>
</td>
<td class="up">Up: <a href="../maps/all.html#50622">Map</a></td>
<td class="next">
Next: <a href="50664.html">C5E8</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Rex (Side B) RAM disassembly 20211106</div>
<div class="copyright">&#169; 1988 Martech Games Ltd. &#169; 2021 Andreu Font.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.5.</div>
</footer>
</body>
</html>