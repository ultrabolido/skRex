<!DOCTYPE html>
<html>
<head>
<title>Rex (Side A): Routine at C1CA</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../rex.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/scr/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="49485.html">C14D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#49610">Map</a></td>
<td class="next">
Next: <a href="49683.html">C213</a>
</td>
</tr>
</table>
<div class="description">C1CA: Handle lateral collision detection for POD and MINE LAYER and shot for MINE LAYER</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="49135.html">BFEF</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="49610"></span>C1CA</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="3">Jump to handle right collision detection if enemy moves right</td>
</tr>
<tr>
<td class="address-1"><span id="49613"></span>C1CD</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="address-1"><span id="49614"></span>C1CE</td>
<td class="instruction">CALL Z,<a href="50144.html">$C3E0</a></td>
</tr>
<tr>
<td class="address-1"><span id="49617"></span>C1D1</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="3">Jump ot handle left collision detection if enemy moves left</td>
</tr>
<tr>
<td class="address-1"><span id="49620"></span>C1D4</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="address-1"><span id="49621"></span>C1D5</td>
<td class="instruction">CALL NZ,<a href="50342.html">$C4A6</a></td>
</tr>
<tr>
<td class="address-1"><span id="49624"></span>C1D8</td>
<td class="instruction">LD A,(IX+$09)</td>
<td class="comment-1" rowspan="3">Return if enemy is not a MINE LAYER</td>
</tr>
<tr>
<td class="address-1"><span id="49627"></span>C1DB</td>
<td class="instruction">CP $0D</td>
</tr>
<tr>
<td class="address-1"><span id="49629"></span>C1DD</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="address-1"><span id="49630"></span>C1DE</td>
<td class="instruction">CALL <a href="41845.html">$A375</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to a pseudo random number</td>
</tr>
<tr>
<td class="address-1"><span id="49633"></span>C1E1</td>
<td class="instruction">CP $F0</td>
<td class="comment-1" rowspan="2">Return if number less than $F0</td>
</tr>
<tr>
<td class="address-1"><span id="49635"></span>C1E3</td>
<td class="instruction">RET C</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="49636"></span>
<div class="comments">
<div class="paragraph">
release a Mine
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="49636"></span>C1E4</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="3">Set <a href="41107.html">A093</a> to the x-position for the MINE</td>
</tr>
<tr>
<td class="address-1"><span id="49639"></span>C1E7</td>
<td class="instruction">ADD A,$08</td>
</tr>
<tr>
<td class="address-1"><span id="49641"></span>C1E9</td>
<td class="instruction">LD ($A093),A</td>
</tr>
<tr>
<td class="address-1"><span id="49644"></span>C1EC</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="3">Set <a href="41109.html">A095</a> to the y-position for the MINE</td>
</tr>
<tr>
<td class="address-1"><span id="49647"></span>C1EF</td>
<td class="instruction">ADD A,$04</td>
</tr>
<tr>
<td class="address-1"><span id="49649"></span>C1F1</td>
<td class="instruction">LD ($A095),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="49652"></span>
<div class="comments">
<div class="paragraph">
Create a new Mine
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="49652"></span>C1F4</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Save <span class="register">IX</span></td>
</tr>
<tr>
<td class="address-1"><span id="49654"></span>C1F6</td>
<td class="instruction">CALL <a href="55384.html">$D858</a></td>
<td class="comment-1" rowspan="1">Check for an avaliable slot into Enemy configuration buffer to configure the mine</td>
</tr>
<tr>
<td class="address-1"><span id="49657"></span>C1F9</td>
<td class="instruction">CALL <a href="52104.html#52696">$CDD8</a></td>
<td class="comment-1" rowspan="1">Configure a mine</td>
</tr>
<tr>
<td class="address-1"><span id="49660"></span>C1FC</td>
<td class="instruction">LD (IX+$09),$0E</td>
<td class="comment-1" rowspan="1">Set enemy type to MINE</td>
</tr>
<tr>
<td class="address-1"><span id="49664"></span>C200</td>
<td class="instruction">LD (IX+$0C),$01</td>
<td class="comment-1" rowspan="1">Set mine alive/visible</td>
</tr>
<tr>
<td class="address-1"><span id="49668"></span>C204</td>
<td class="instruction">LD A,($A093)</td>
<td class="comment-1" rowspan="2">Set mine x-position</td>
</tr>
<tr>
<td class="address-1"><span id="49671"></span>C207</td>
<td class="instruction">LD (IX+$00),A</td>
</tr>
<tr>
<td class="address-1"><span id="49674"></span>C20A</td>
<td class="instruction">LD A,($A095)</td>
<td class="comment-1" rowspan="2">Set mine y-position</td>
</tr>
<tr>
<td class="address-1"><span id="49677"></span>C20D</td>
<td class="instruction">LD (IX+$01),A</td>
</tr>
<tr>
<td class="address-1"><span id="49680"></span>C210</td>
<td class="instruction">POP IX</td>
<td class="comment-1" rowspan="1">Restore <span class="register">IX</span></td>
</tr>
<tr>
<td class="address-1"><span id="49682"></span>C212</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="49485.html">C14D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#49610">Map</a></td>
<td class="next">
Next: <a href="49683.html">C213</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Rex (Side A) RAM disassembly 20210825</div>
<div class="copyright">&#169; 1988 Martech Games Ltd. &#169; 2021 Andreu Font.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.5.</div>
</footer>
</body>
</html>